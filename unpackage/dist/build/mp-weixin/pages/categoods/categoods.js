(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/categoods/categoods"],{2678:function(t,i,o){"use strict";(function(t){o("7f00");e(o("66fd"));var i=e(o("e92a"));function e(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,o("543d")["createPage"])},"285c":function(t,i,o){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o={onShareAppMessage:function(t){return{title:this.key,path:"pages/categoods/categoods?name="+this.key+"&fid="+this.fid+"&mid="+this.mid,success:function(t){console.log(t)},fail:function(t){console.log(t)}}},data:function(){return{key:"",headerPosition:"fixed",tabbarIndex:0,scrollLeft:0,cateList:[],fid:"",mid:"",small:"",pagecount:0,page:1,productList:[],loadingText:"正在加载中...",scrollTop:0}},onPageScroll:function(t){this.scrollTop=t.scrollTop,this.headerPosition=t.scrollTop>=0?"fixed":"absolute"},onPullDownRefresh:function(){var i=this;this.productList=[],setTimeout((function(){1e3==i.fid?i.getnewGoods():i.getgoodList(),t.stopPullDownRefresh()}),1e3)},onReachBottom:function(){var t=this;if(this.page++,this.page<=this.pagecount||!this.pagecount)this.loadingText="正在加载中...",1e3==this.fid?this.getnewGoods():this.getgoodList();else{for(var i,o=0;o<this.cateList.length;o++)this.cateList[o].id==this.mid&&(i=o+1);console.log(i,this.cateList.length),this.tabbarIndex=this.cateList[i].id,this.mid=this.tabbarIndex,setTimeout((function(){t.page=1,t.getgoodList()}),1e3),this.cateList.length!=i&&1e3!=this.fid||(this.loadingText="没有更多商品了")}},onLoad:function(i){this.fid=i.fid,this.key=i.name,console.log(i),i.mid?this.mid=i.mid:this.mid=0,this.tabbarIndex=this.mid,t.setNavigationBarTitle({title:this.key}),1e3==this.fid?this.getnewGoods():this.getcate()},onShow:function(){},methods:{getcate:function(){var t=this,i={fid:this.fid};this.$xm.post("/Procate/getMid",i,(function(i){t.cateList=i,t.getgoodList()}))},tocategoods:function(t){this.loadingText="正在加载中...",this.productList=[],this.mid=t,this.tabbarIndex=this.mid,this.getgoodList()},getnewGoods:function(){var t=this,i={p:this.page};this.$xm.post("/Index/newpro",i,(function(i){var o=i.data;o.map((function(t){t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"})),t.pagecount=i.p,t.productList=t.productList.concat(o)}))},getgoodList:function(){var t=this,i={big:this.fid,mid:this.mid,small:this.small,pageid:this.page};this.$xm.post("/Product/proList",i,(function(i){var o=i.prolist;o.map((function(t){t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300",t.itemcount=0})),1!=i.count&&i.count||(t.loadingText="没有更多商品了"),t.pagecount=i.count,t.productList=t.productList.concat(o)}))},toGoods:function(i){t.navigateTo({url:"../goods/goods?gid="+i.id})},joinCart:function(i){var o={proid:i.id,pronum:1};this.$xm.post("/Cart/add",o,(function(i){var o=i.msg;t.showToast({title:o})}))}}};i.default=o}).call(this,o("543d")["default"])},"3e88":function(t,i,o){"use strict";var e,s=function(){var t=this,i=t.$createElement;t._self._c},n=[];o.d(i,"b",(function(){return s})),o.d(i,"c",(function(){return n})),o.d(i,"a",(function(){return e}))},"53fd":function(t,i,o){"use strict";o.r(i);var e=o("285c"),s=o.n(e);for(var n in e)"default"!==n&&function(t){o.d(i,t,(function(){return e[t]}))}(n);i["default"]=s.a},8385:function(t,i,o){},c94b:function(t,i,o){"use strict";var e=o("8385"),s=o.n(e);s.a},e92a:function(t,i,o){"use strict";o.r(i);var e=o("3e88"),s=o("53fd");for(var n in s)"default"!==n&&function(t){o.d(i,t,(function(){return s[t]}))}(n);o("c94b");var a,c=o("f0c5"),d=Object(c["a"])(s["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],a);i["default"]=d.exports}},[["2678","common/runtime","common/vendor"]]]);