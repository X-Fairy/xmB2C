(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/seckill/bargain/cut"],{5484:function(t,o,n){"use strict";var e={modal:function(){return n.e("components/modal/modal").then(n.bind(null,"0b6c"))}},i=function(){var t=this,o=t.$createElement;t._self._c;t._isMounted||(t.e0=function(o){t.ruleShow=!0},t.e1=function(o){t.priceShow=!1},t.e2=function(o){t.ruleShow=!1})},s=[];n.d(o,"b",(function(){return i})),n.d(o,"c",(function(){return s})),n.d(o,"a",(function(){return e}))},"5ef5":function(t,o,n){},"64e2":function(t,o,n){"use strict";(function(t){n("7f00");e(n("66fd"));var o=e(n("c837"));function e(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,n("543d")["createPage"])},"778c":function(t,o,n){"use strict";var e=n("5ef5"),i=n.n(e);i.a},b659:function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=function(){n.e("components/countdown/countdown").then(function(){return resolve(n("58c2"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/ahh5-animated/ahh5-animated").then(function(){return resolve(n("bab3"))}.bind(null,n)).catch(n.oe)},s={components:{tuiCountdown:e,Ahh5Animated:i},onShareAppMessage:function(t){var o=this;return"button"===t.from?(console.log(this.bid,this.mid),{title:"有人@你，帮我点一下好吗？全场商品你也可以免费拿哦~",path:"pages/seckill/bargain/cut?bid="+this.bid+"&mid="+this.mid,success:function(t){console.log("转发成功"),o.priceShow=!1},fail:function(t){console.log("转发失败")}}):{title:"有人@你，帮我点一下好吗？全场商品你也可以免费拿哦~",path:"pages/seckill/bargain/cut?bid="+this.bid+"&mid="+this.mid}},data:function(){return{userInfo:null,ruleShow:!1,bid:"",mid:"",goods:{},peopleList:[],status:"",cutShow:!1,priceShow:!1,b_price:"",priceTotle:"",sur_price:""}},onLoad:function(t){console.log(t),this.bid=t.bid,this.mid=t.mid,"undefined"===this.mid?(this.mid="",this.cutShow=!0):this.cutShow=!1},onShow:function(){this.getinfo(),this.userInfo=t.getStorageSync("userInfo"),console.log(this.userInfo)},onPullDownRefresh:function(){this.getinfo(),setTimeout((function(){t.stopPullDownRefresh()}),1e3)},methods:{getuserinfo:function(){var o=this;t.login({success:function(n){if(n.code){n.code;t.getUserInfo({success:function(n){o.userInfo=n.userInfo,o.showModal=!1;var e={encryptedData:n.encryptedData,iv:n.iv};o.$xm.post("/Index/getUnionid",e,(function(n){var e=t.getStorageSync("user");e.unionid=n.unionid,t.setStorage({key:"user",data:e,success:function(t){console.log(t)}}),o.toBargain()})),t.setStorage({key:"userInfo",data:n.userInfo,success:function(t){console.log(t)}})},fail:function(t){}})}}})},toBargain:function(){var o=this,n={bid:this.bid,mid:this.mid};this.$xm.post("/bargain/Bargain",n,(function(n){0==n.s?t.showToast({title:n.msg}):(o.mid=n.mid,o.b_price=n.b_price,o.cutShow=!1,o.priceShow=!0,o.getinfo())}))},getinfo:function(){var t=this,o={mid:this.mid,bid:this.bid};this.$xm.post("/bargain/getinfo",o,(function(o){t.goods=o.bargain,t.goods.pro_img="http://img.xmvogue.com/thumb/"+t.goods.pro_sn+".jpg?x-oss-process=style/300",t.goods.etime=o.etime-Math.round(new Date/1e3),t.goods.progress=o.price_totle/(t.goods.pro_price-t.goods.dis_price)*100,t.peopleList=o.bargain_user,t.status=o.status,t.priceTotle=o.price_totle,t.sur_price=t.goods.pro_price-t.priceTotle-t.goods.dis_price,t.sur_price=t.sur_price.toFixed(2),2!=t.status&&6!=t.status||(t.priceShow=!1)}))},toBargainPage:function(){t.navigateTo({url:"./bargain"})},toUse:function(o){var n={proid:o.proid,pronum:1};this.$xm.post("/Cart/add",n,(function(o){1==o.s?t.switchTab({url:"../../tabBar/cart/cart"}):0==o.s&&t.showToast({title:o.msg,icon:"none"})}))}}};o.default=s}).call(this,n("543d")["default"])},c72a:function(t,o,n){"use strict";n.r(o);var e=n("b659"),i=n.n(e);for(var s in e)"default"!==s&&function(t){n.d(o,t,(function(){return e[t]}))}(s);o["default"]=i.a},c837:function(t,o,n){"use strict";n.r(o);var e=n("5484"),i=n("c72a");for(var s in i)"default"!==s&&function(t){n.d(o,t,(function(){return i[t]}))}(s);n("778c");var c,u=n("f0c5"),r=Object(u["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],c);o["default"]=r.exports}},[["64e2","common/runtime","common/vendor"]]]);