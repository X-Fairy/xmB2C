(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"03c5":function(t,e,o){"use strict";o.r(e);var i=o("76c0"),n=o("0b8a");for(var s in n)"default"!==s&&function(t){o.d(e,t,(function(){return n[t]}))}(s);o("3771");var a,r=o("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);e["default"]=c.exports},"0b8a":function(t,e,o){"use strict";o.r(e);var i=o("39e0"),n=o.n(i);for(var s in i)"default"!==s&&function(t){o.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},3771:function(t,e,o){"use strict";var i=o("55d2"),n=o.n(i);n.a},"39e0":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(o("0f57")),n=a(o("a1e0")),s=o("f93e");function a(t){return t&&t.__esModule?t:{default:t}}var r=function(){o.e("components/modal/modal").then(function(){return resolve(o("0b6c"))}.bind(null,o)).catch(o.oe)},c=function(){o.e("components/icon/icon").then(function(){return resolve(o("0950"))}.bind(null,o)).catch(o.oe)},l=function(){o.e("components/countdown/countdown").then(function(){return resolve(o("58c2"))}.bind(null,o)).catch(o.oe)},u={onShareAppMessage:function(t){return{title:"熙美诚品",path:"pages/index/index",success:function(t){console.log(t)},fail:function(t){console.log(t)}}},components:{modal:r,tuiIcon:c,tuiCountdown:l},data:function(){return{bgcolor:[],backgroundColorRgb:"rgba(255,255,255)",headerTop:0,userProvider:"",scrollTop:0,getheight:"",specialImgHeight:"",storeName:"总部旗舰店",address:"",city:"",id:"",secret:{},showHeader:!0,afterHeaderOpacity:1,headerPosition:"fixed",statusTop:null,nVueTitle:null,swiperCurrent:0,swiperList:[],actionBanner:[],categoryList:[],seckillList:[],bartainlist:[],assembleList:[],seckillTime:0,bargainList:[],Promotion:[],productList:[],specialList:[],loadingText:"正在加载中...",amapPlugin:null,modalShow:!1,storeItems:[{store_name:"总部旗舰店",desc:"由总部统一发货",store_code:"10001"}],store:"10001",hint:"熙美诚品",popup:null,scrollLeft:0,popHeight:0,addShow:!0,traitList:[],traitListImg:["/static/img/pinpai.png","/static/img/baoyou.png","/static/img/jisu.png"]}},onPageScroll:function(t){this.scrollTop=t.scrollTop,this.headerPosition=t.scrollTop>=0?"fixed":"absolute",this.statusTop=t.scrollTop>=0?null:-this.statusHeight+"px"},onPullDownRefresh:function(){this.Promotion=[],this.getgoods(),this.getassembleList(),this.getPromotionList(),setTimeout((function(){t.stopPullDownRefresh()}),1e3)},onReachBottom:function(){this.getPromotionList(),setTimeout((function(){t.stopPullDownRefresh()}),1e3)},onLoad:function(){this.getbig(),this.getgoods(),this.getassembleList(),this.getPromotionList(),this.userProvider=this.$xm.userProvider(),"weixin"!=this.userProvider&&t.login({success:function(e){if(console.log(e),e.code){e.code;t.getUserInfo({success:function(e){console.log(e),t.setStorage({key:"userInfo",data:e.userInfo,success:function(t){console.log(t)}})},fail:function(t){console.log(t)}})}}}),this.getLocation()},onShow:function(){var e=this;t.getStorageSync("store")&&(this.storeName=t.getStorageSync("store").store_name,this.store=t.getStorageSync("store").store_code,this.getgoods()),t.createSelectorQuery().select(".navHeader").boundingClientRect((function(t){e.headerTop=t.height+"px"})).exec()},filters:{toFixed:function(t){return parseFloat(t).toFixed(1)}},methods:{getbig:function(){var t=this,e=(new Date).getTime(),o=n.default.hex_md5("XM#"+n.default.hex_md5(String(e))+"@secret"),i={store:this.store,secret:e,timestamp:o};(0,s.ajax)({url:"/Procate/getBig",method:"post",data:i,success:function(e){t.categoryList=e.data}})},getLocation:function(){var e=this;t.getLocation({success:function(t){console.log(t),e.getCity(t.latitude,t.longitude)},fail:function(t){console.log(t)}})},getCity:function(e,o){var n=this,s=new i.default({key:"LVHBZ-SOY6W-Z5URP-OC34Q-CLWZH-Y6BCX"});s.reverseGeocoder({location:{latitude:e,longitude:o},success:function(e){console.log(e),n.city=e.result.ad_info.city;var o=e.result.location.lat,i=e.result.location.lng;n.address=e.result.address,t.setStorageSync("local",e.result.address);var s={city:n.city,from:o+","+i};n.$xm.post("/Index/getStoreList",s,(function(e){n.storeItems=e.data,t.setStorageSync("storeList",e.data)}))},fail:function(t){console.log(t)},complete:function(t){}})},getassembleList:function(){var t=this;this.$xm.post("/groupbuy/getlist","",(function(e){t.assembleList=e.list.splice(0,2),t.assembleList.forEach((function(t){t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"}))}))},toBargain:function(){t.navigateTo({url:"../seckill/bargain/bargain"})},getPromotionList:function(){var t=this;this.$xm.post("/Cart/guess","",(function(e){e.data.map((function(t){t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"})),t.Promotion=t.Promotion.concat(e.data)}))},getgoods:function(){var e=this;this.swiperList=[];var o=(new Date).getTime(),i=n.default.hex_md5("XM#"+n.default.hex_md5(String(o))+"@secret"),a={store:this.store,secret:o,timestamp:i};(0,s.ajax)({url:"/Index/getInfo",method:"post",data:a,success:function(o){var i=o.data;if(i.bgcolor){e.bgcolor=i.bgcolor;var n="linear-gradient(90deg,";n+="rgb("+e.bgcolor[0]+"),rgb("+e.bgcolor[1]+"))",e.backgroundColorRgb=n}e.traitList=i.trait,i.popup&&(e.popup=i.popup,e.popHeight=e.popup.height),t.getStorageSync("store")?e.modalShow=!1:""!=i.popup.img?e.modalShow=!0:e.modalShow=!1,e.getheight=i.banner[0].height+"rpx",e.specialImgHeight=i.special.height+"rpx",e.hint=i.hint,t.setNavigationBarTitle({title:e.hint}),e.swiperList=i.banner,e.swiperList.map((function(t){t.img=i._URL_+t.img})),e.actionBanner=i.img,e.bargainList=i.bargain,e.productList=i.rem,e.bargainList.forEach((function(t){t.itemcount=0,t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"})),e.productList.forEach((function(t){t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300",t.itemcount=0,t.pro_name.length})),i.special.goods&&i.special.goods.map((function(t){t.itemcount=0,t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"})),e.specialList=i.special,e.seckillList=i.seckill.next.splice(0,2),e.seckillList.forEach((function(t){t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"})),i.seckill.next.length>0&&(e.seckillTime=parseInt(i.seckill.next[0].etime)-Math.round(new Date/1e3))}})},scroll:function(t){this.scrollLeft=t.detail.scrollLeft},toSearch:function(){t.navigateTo({url:"../search/search/search"})},toSwiper:function(e){var o=e.src.split("@");switch(o[0]){case"product":t.navigateTo({url:"../goods/goods?gid="+o[1]});break;case"news":t.navigateTo({});break;case"sort":break;case"player":t.navigateTo({url:"plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id="+o[1]});break;case"open":t.navigateTo({url:"../webViwe/webViwe?url="+o[1]});break;case"cate":t.navigateTo({url:"../categoods/categoods?fid="+o[1]+"&name="+o[2]});break;case"goodList":t.navigateTo({url:"../goods/goods-list/goods-list?key="+o[1]});break;default:}},tonewGood:function(){t.navigateTo({url:"../categoods/categoods?fid=1000&name=新品推荐"})},toPage:function(e){var o=e.url.split("@");switch(console.log(o),o[0]){case"product":t.navigateTo({url:"../goods/goods?gid="+o[1]});break;case"news":break;case"sort":break;case"player":t.navigateTo({url:"plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id="+o[1]});break;case"open":t.navigateTo({url:"../webViwe/webViwe/webViwe?url="+o[1]});break;case"cate":t.navigateTo({url:"../categoods/categoods?fid="+o[1]+"&name="+o[2]});break;case"bargain":t.navigateTo({url:"../seckill/bargain/bargain"});break;case"goodList":t.navigateTo({url:"../goods/goods-list/goods-list?key="+o[1]});break;default:}},toProduct:function(e){t.navigateTo({url:"../goods/goods-list/product/product?key="+e})},toSpeciall:function(e){t.navigateTo({url:"../speciall/speciall?index="+e})},toCategory:function(e){t.setStorageSync("cateSelect",e),t.switchTab({url:"../tabBar/category/category"})},toGoods:function(e){t.navigateTo({url:"../goods/goods?gid="+e.id})},toSeckill:function(){t.navigateTo({url:"../seckill/seckill/seckill"})},toGroup:function(){t.navigateTo({url:"../seckill/group/group"})},swiperChange:function(t){var e=t.detail.current;this.swiperCurrent=e},tobuy:function(t){this.id=t.id,this.joinCart()},joinCart:function(){var e=this,o={proid:this.id,pronum:1};this.$xm.post("/Cart/add",o,(function(o){var i=o.msg;1==o.s?(e.addShow=!0,t.showToast({title:i})):0==o.s&&(e.addShow=!1,t.showToast({title:i,icon:"none"})),e.$xm.post("/Cart","",(function(e){t.setStorage({key:"cart",data:e.count,success:function(e){t.getStorage({key:"cart",success:function(e){var o=e.data;null!==e.data&&e.data>0&&(o=o.toString(),t.setTabBarBadge({index:2,text:o}))}})}})}))}))},toStore:function(){t.navigateTo({url:"../store/store/store"})}}};e.default=u}).call(this,o("543d")["default"])},"55d2":function(t,e,o){},"76c0":function(t,e,o){"use strict";var i={hxNavbar:function(){return o.e("components/hx-navbar/hx-navbar").then(o.bind(null,"6184"))},modal:function(){return o.e("components/modal/modal").then(o.bind(null,"0b6c"))}},n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.seckillList,(function(e,o){var i=t._f("toFixed")(e.dis_price),n=t._f("toFixed")(e.pro_price);return{$orig:t.__get_orig(e),f0:i,f1:n}}))),i=t.__map(t.assembleList,(function(e,o){var i=t._f("toFixed")(e.dis_price),n=t._f("toFixed")(e.pro_price);return{$orig:t.__get_orig(e),f2:i,f3:n}}));t._isMounted||(t.e0=function(e){t.modalShow=!1},t.e1=function(e){t.modalShow=!1},t.e2=function(e){t.modalShow=!1}),t.$mp.data=Object.assign({},{$root:{l0:o,l1:i}})},s=[];o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return i}))},b37a:function(t,e,o){"use strict";(function(t){o("7f00");i(o("66fd"));var e=i(o("03c5"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])}},[["b37a","common/runtime","common/vendor"]]]);